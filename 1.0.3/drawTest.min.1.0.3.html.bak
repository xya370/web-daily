<!DOCTYPE html>
<html>
  <head>
	<!--依赖jquery的js文件，这个必须在引入资源js之前引入。可以使用本地的js文件-->
	<script type="text/javascript" src="http://10.70.100.56/aiApi/resources/javascript/jquery-1.8.0.min.js" charset="UTF-8"></script>
	<script  type="text/javascript">
		//maxArea:自定义面积上限，最小值10000，最大值100000000|d9fe88adcc582a591610fb9312f217b0
	</script>
	<!--script type="text/javascript" src="http://10.78.200.44:9001/aiDataPlat/resources/javascript/MapTools/api.drawlacci-1.0.3.min.js?appid=a2c5d44174fbaadb8e7bca3d789cb8e0&maxArea=100000000" charset="UTF-8"></script-->
	<script type="text/javascript" src="http://10.70.100.56/aiApi/resources/javascript/MapTools/api.drawlacci-1.0.3.min.js?appid=a2c5d44174fbaadb8e7bca3d789cb8e0&maxArea=100000000" charset="UTF-8"></script>
  </head>
<body style="padding:0px;margin:0px;">
	<!--定义一个div层，用于地图的显示-->
	<div id="globalMap" class="map" style="width: 100%;height:580px"></div>

	<textarea id="demoLacci" name="demoLacci" cols="120" rows="4"></textarea>
	<input type="button" value="获取基站清单" onclick="cmdGetStation()">
	<input type="button" value="获取轮廓点序列" onclick="cmdGetContourPoints()">
	<input type="button" value="画出轮廓点" onclick="cmdDrawPolygon()">
</body>
</html>
<script type="text/javascript">
//定义一个全局对象
var drawObj;
$(function() {
	//初始化,把用于展示地图的div对象的ID作为入参
	drawObj = new drawlacci("globalMap");
	//初始化地图控件
	/**
	 * drawObj = new Drawing4Lacci("globalMap",{initAddr:"浙江省杭州市",initZoom:12,OverviewMapControl:false,ScaleControl:false});
	 * initAddr:地图中心位置，默认：浙江省杭州市
	 * initZoom:地图缩放级别，默认：12
	 * OverviewMapControl：是否需要打开右下角的缩略图，默认：false
	 * ScaleControl：是否需要打开左上角的缩放控件，默认：false
	 *
	 **/
});

/**
 * 获取轮廓点序列
 * 各坐标点使用“;”分割，经纬度坐标值使用“,”分割
 **/
function cmdGetContourPoints(){
	$("#demoLacci").val("");
	drawObj.outputContourPoints(function(data){
		 if(data.responseCode == -1){	//
			$("#demoLacci").css("color","red");
			$("#demoLacci").val("error:\r\n"+data.responseMessage);
			 return ;
		 }
		 else if(data.responseCode == 1){	//获取成功
			$("#demoLacci").css("color","#000");
			$("#demoLacci").val(data.responseData);
		 }
	})
}
/**
 * 根据坐标点序列绘制多边形
 * 各坐标点使用“;”分割，经纬度坐标值使用“,”分割
 **/
function cmdDrawPolygon(){
	/**
	 * $("#demoLacci").val()： 为多边形轮廓的顶点序列
	 **/
	drawObj.drawDiyPolygon($("#demoLacci").val(),function(data){
		if(data.responseCode == -1){
			$("#demoLacci").css("color","red");
			$("#demoLacci").val("error:\r\n"+data.responseMessage);
			 return ;
		}
	});
}
function cmdGetStation() {
	$("#demoLacci").val("");
	//获取框选区域内的基站列表
	drawObj.outputStations(function(data){
		/**
		 * 基站结果返回，格式JSON
		 **/
		 if(data.responseCode == -1){	//
			$("#demoLacci").css("color","red");
			$("#demoLacci").val("error:\r\n"+data.responseMessage);
			 return ;
		 }
		 else if(data.responseCode == 0){	//获取成功
			var lac_list = data.responseData;	//基站列表,一个JSONArray数组
			var _list = [];
			for(var i=0;i<lac_list.length;i++){	//遍历获取
				_list.push(lac_list[i]);
			}
			$("#demoLacci").css("color","#000");
			$("#demoLacci").val(_list);
		 }
	})
}
</script>